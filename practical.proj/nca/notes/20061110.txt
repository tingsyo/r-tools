2006.11.10

[Comparing procedure]
1. Use NCA to fit an optimized tranformation matrix.
2. By this matrix, we compute the probability distribution and estimated k (take the floor on its perplexity).  
3. With this same k, we compare the kNN on original dataset and tranformed data.

[Iris dataset]
-------------------------------------------------------
  CV  k        kNN    NCA-COV  K        kNN   NCA-PCOV
-------------------------------------------------------
 [1,] 1 0.06666667 0.06666667 10 0.06666667 0.00000000
 [2,] 1 0.00000000 0.06666667 10 0.00000000 0.00000000
 [3,] 1 0.00000000 0.13333333 10 0.00000000 0.00000000
 [4,] 1 0.13333333 0.00000000 10 0.00000000 0.00000000
 [5,] 1 0.00000000 0.06666667 10 0.00000000 0.00000000
 [6,] 1 0.06666667 0.13333333  9 0.13333333 0.06666667
 [7,] 1 0.06666667 0.00000000 10 0.06666667 0.06666667
 [8,] 1 0.13333333 0.33333333  1 0.13333333 0.13333333
 [9,] 1 0.06666667 0.13333333 10 0.13333333 0.00000000
[10,] 1 0.00000000 0.00000000 10 0.00000000 0.00000000
-------------------------------------------------------
Ave.  1 0.05333333 0.09333333  9 0.05333333 0.02666667
-------------------------------------------------------

With dimension reduction: rd=2
--------------------------------------------------------
  CV   k         kNN   NCA-COV K          kNN   NCA-PCOV
--------------------------------------------------------
 [1,] 20  0.00000000 0.4000000 1   0.06666667 0.13333333
 [2,] 44  0.13333333 0.5333333 1   0.00000000 0.33333333
 [3,] 38  0.13333333 0.4666667 1   0.00000000 0.06666667
 [4,] 20  0.00000000 0.4666667 1   0.13333333 0.13333333
 [5,] 20  0.00000000 0.5333333 1   0.00000000 0.06666667
 [6,] 19  0.06666667 0.6666667 1   0.06666667 0.06666667
 [7,] 18  0.06666667 0.6000000 1   0.06666667 0.13333333
 [8,] 19  0.06666667 0.6000000 1   0.13333333 0.13333333
 [9,] 33  0.13333333 0.6666667 1   0.06666667 0.20000000
[10,] 20  0.00000000 0.5333333 1   0.00000000 0.06666667
--------------------------------------------------------
Ave.  25  0.06000000 0.5466667 1   0.05333333 0.13333333
--------------------------------------------------------



[Balance-scale dataset]
---------------------------------------------------------
  CV  k         kNN    NCA-COV  K          kNN   NCA-PCOV
---------------------------------------------------------
 [1,] 4  0.14285714 0.17460317 14   0.15873016 0.15873016
 [2,] 2  0.11111111 0.17460317 13   0.07936508 0.06349206
 [3,] 1  0.20634921 0.26984127 13   0.14285714 0.12698413
 [4,] 1  0.09523810 0.19047619  2   0.12698413 0.12698413
 [5,] 1  0.07936508 0.19047619 13   0.04761905 0.01587302
 [6,] 3  0.06451613 0.20967742 14   0.04838710 0.04838710
 [7,] 4  0.16129032 0.19354839 21   0.12903226 0.09677419
 [8,] 5  0.09677419 0.06451613 12   0.03225806 0.03225806
 [9,] 2  0.16129032 0.20967742 14   0.09677419 0.08064516
[10,] 3  0.16129032 0.14516129  1   0.16129032 0.09677419
---------------------------------------------------------
Ave. 2.6 0.12800819 0.18225806 11.7 0.10232975 0.08469022
---------------------------------------------------------

With dimension reduction: rd=2
--------------------------------------------------------
  CV   k         kNN   NCA-COV K          kNN   NCA-PCOV
--------------------------------------------------------
 [1,] 1  0.15873016 0.26984127 3   0.15873016 0.17460317
 [2,] 1  0.09523810 0.31746032 2   0.09523810 0.07936508
 [3,] 1  0.19047619 0.28571429 3   0.22222222 0.25396825
 [4,] 1  0.07936508 0.17460317 3   0.07936508 0.17460317
 [5,] 1  0.07936508 0.06349206 3   0.06349206 0.07936508
 [6,] 1  0.08064516 0.17741935 2   0.08064516 0.17741935
 [7,] 1  0.14516129 0.27419355 3   0.14516129 0.19354839
 [8,] 1  0.08064516 0.11290323 2   0.06451613 0.12903226
 [9,] 1  0.16129032 0.24193548 2   0.17741935 0.25806452
[10,] 1  0.16129032 0.29032258 2   0.16129032 0.22580645
--------------------------------------------------------
Ave.  1  0.1232207  0.2207885  2.5 0.1248080  0.1745776
--------------------------------------------------------



[Wine dataset]
---------------------------------------------------------
  CV  k        kNN    NCA-COV K          kNN   NCA-PCOV
---------------------------------------------------------
 [1,] 1 0.05555556 0.16666667 1   0.05555556 0.05555556
 [2,] 1 0.05555556 0.11111111 2   0.11111111 0.00000000
 [3,] 1 0.00000000 0.00000000 2   0.00000000 0.00000000
 [4,] 1 0.00000000 0.05555556 2   0.05555556 0.00000000
 [5,] 1 0.00000000 0.00000000 2   0.00000000 0.00000000
 [6,] 1 0.11111111 0.27777778 2   0.11111111 0.05555556
 [7,] 1 0.11111111 0.05555556 1   0.11111111 0.05555556
 [8,] 1 0.11111111 0.05555556 2   0.11111111 0.05555556
 [9,] 1 0.00000000 0.05882353 2   0.00000000 0.00000000
[10,] 1 0.00000000 0.05882353 1   0.00000000 0.00000000
---------------------------------------------------------
Ave.  1 0.04444444 0.08398693 1.7 0.05555556 0.02222222
---------------------------------------------------------

With dimension reduction: rd=2
----------------------------------------------------------
  CV   k         kNN     NCA-COV  K        kNN   NCA-PCOV
----------------------------------------------------------
 [1,] 1   0.05555556   0.6111111  1  0.05555556  0.2222222
 [2,] 1   0.05555556   0.5555556  1  0.05555556  0.5000000
 [3,] 1   0.00000000   0.4444444  1  0.00000000  0.2222222
 [4,] 1   0.00000000   0.4444444  1  0.00000000  0.3888889
 [5,] 9   0.00000000   0.5000000  1  0.00000000  0.2777778
 [6,] 1   0.11111111   0.5000000  1  0.11111111  0.5555556
 [7,] 1   0.11111111   0.5555556  1  0.11111111  0.2222222
 [8,] 8   0.05555556   0.1666667  1  0.11111111  0.2222222
 [9,] 1   0.00000000   0.6470588  1  0.00000000  0.4705882
[10,] 1   0.00000000   0.7058824  1  0.00000000  0.4117647
----------------------------------------------------------
Ave.  2.5 0.03888889   0.5130719  1  0.04444444  0.3493464
----------------------------------------------------------

[Note]
1. For all three datasets, full-rank NCA with "PCOVM" as initial guess outperforms the traditional kNN.
(PCOVM: square root of inverse to Pooled COVariance Matrix)

2. Rank reduction increases error rate (which is reasonable), and sometime this increase is huge.

3. Perplexity varies a lot even for same dataset with different slicing, and it hardly shows any rules.




